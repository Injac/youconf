@model YouConf.Data.Entities.Conference

<style>
    .speaker-box {
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        border-radius: 4px;
        text-align: left;
    }

    .one-third {
        width: 25%;
        float: left;
    }

    .speaker-box h3 {
        font-size: 1.3em;
        background-color: lightgray;
    }

    .speaker-box p {
        font-size: 0.9em;
    }

    .notice {
        background-color: #fbf9e9;
        border: 1px solid #e3cf57;
        color: #212121;
    }

    .info-grey {
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    * {
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
    }

    .grid {
        background: white;
        margin: 0 0 20px 0;
    }

        .grid:after {
            content: "";
            display: table;
            clear: both;
        }

    [class*='col-'] {
        float: left;
        padding-right: 20px;
    }

    .grid [class*='col-']:last-of-type {
        padding-right: 0;
    }

    .col-2-3 {
        width: 66.66%;
    }

    .col-1-3 {
        width: 33.33%;
    }

    .col-1-2 {
        width: 50%;
    }

    .col-1-4 {
        width: 25%;
    }

    .col-1-8 {
        width: 12.5%;
    }

    /* Opt-in outside padding */
    .grid-pad {
        padding: 20px 0 20px 20px;
    }

        .grid-pad [class*='col-']:last-of-type {
            padding-right: 20px;
        }
</style>


<h2>@Model.HashTag - @Model.Name</h2>
<p><strong>@Model.Abstract</strong></p>
@{
    var conferenceTimeZone = TimeZoneInfo.FindSystemTimeZoneById(Model.TimeZoneId);
    var utcStartDate = TimeZoneInfo.ConvertTimeToUtc(Model.StartDate, conferenceTimeZone);
    var utcEndDate = TimeZoneInfo.ConvertTimeToUtc(Model.EndDate, conferenceTimeZone);
}
<span class="event-time"><strong>When:</strong>@Model.StartDate.ToShortDateString() - @Model.EndDate.ToShortDateString() @conferenceTimeZone.DisplayName (@utcStartDate.ToShortDateString() - @utcEndDate.ToShortDateString() GMT) </span>
@if (!String.IsNullOrWhiteSpace(Model.HangoutUrl))
{
    <p><strong>@Html.ActionLink("View live stream", "Live", new { hashTag = Model.HashTag })</strong></p>
    @*<p><strong><a id="LiveStream" href="#">View live stream</a> </strong></p>*@
}
<p>@Model.Description</p>
<div>
    <h2>Speakers</h2>
    <div class="grid">
        @for (int i = 0; i < Model.Speakers.Count; i++)
        {
            var speaker = Model.Speakers[i];
@*<div class='info-box col_1_4 @(((i + 1) % 4) == 0 ? "last" : "")'>*@
            <div class="col-1-4 speaker-box">
                <h3 style="line-height: 50px;">@if (!String.IsNullOrWhiteSpace(speaker.AvatarUrl))
                                               {
                    <img style="float: left; margin-right: 1em" src="@speaker.AvatarUrl" title="@speaker.Name Avatar image" />
                                               }
                    @speaker.Name
                </h3>
                <p>@speaker.Bio <a href="@speaker.Url" title="@speaker.Name">More...</a></p>
                <p>@Html.ActionLink("Edit", "Edit", "Speaker", new { id = speaker.Id, conferenceHashTag = Model.HashTag }, null) |
    @Html.ActionLink("Remove", "Delete", "Speaker", new { id = speaker.Id, conferenceHashTag = Model.HashTag }, null)
                </p>
            </div>@* 
        if ((i + 1) % 4 == 0)
        {
        <div class="clear padding20"></div>
        }*@
        }
    </div>

    <p>@Html.ActionLink("Add new", "Add", "Speaker", new { id = Model.HashTag }, null)</p>
</div>
<div>
    <h3>Presentations</h3>
    @foreach (var presentation in Model.Presentations)
    {
        var speakerNames = String.Join(",", presentation.Speakers.Select(x => x.Name.ToArray()));
        <h4>@presentation.Name by @speakerNames</h4>
        <span class="event-time">@presentation.StartTime.ToShortDateString() - @presentation.StartTime.Add(TimeSpan.FromMinutes(@presentation.Duration)).ToShortDateString() @presentation.TimeZone (@presentation.StartTime.ToUniversalTime() - @presentation.StartTime.Add(TimeSpan.FromMinutes(@presentation.Duration)).ToUniversalTime().ToShortDateString()) UTC) </span>
        <p>@presentation.Abstract</p>
        <p>
            <p>@Html.ActionLink("Edit", "Edit", "Presentation", new { id = presentation.Name, conference = Model.HashTag }) |
    @Html.ActionLink("Remove", "Delete", "Presentation", new { id = presentation.Name, conference = Model.HashTag })
            </p>
        </p>
    }
    <p>@Html.ActionLink("Add new", "Add", "Presentation", new { id = Model.HashTag }, null)</p>
</div>

<p>
    @Html.ActionLink("Edit", "Edit") |
    @Html.ActionLink("Delete", "Delete") |
    @Html.ActionLink("Back to List", "All")
</p>

@*@section scripts{
    <script>
        $(function () {
            $("#LiveStream").click(function () {
                $("<div><iframe width=\"420\" height=\"315\" src=\"@Model.HangoutUrl\" frameborder=\"0\" allowfullscreen></iframe></div>")
            .insertAfter($(this));
            
        });
    });
    </script>
}*@
